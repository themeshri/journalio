{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///Users/husammeshri/Desktop/journalio/journalio-new/src/app/api/trades/%5BtradeId%5D/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server';\nimport { z } from 'zod';\n\n// Trade edit validation schema\nconst tradeEditSchema = z.object({\n  type: z.enum(['buy', 'sell', 'swap']).optional(),\n  tokenIn: z.string().min(1).optional(),\n  tokenOut: z.string().min(1).optional(),\n  amountIn: z.string().refine(val => val === '' || (!isNaN(Number(val)) && Number(val) > 0)).optional(),\n  amountOut: z.string().refine(val => val === '' || (!isNaN(Number(val)) && Number(val) > 0)).optional(),\n  priceIn: z.string().optional(),\n  priceOut: z.string().optional(),\n  dex: z.string().optional(),\n  fees: z.string().refine(val => val === '' || (!isNaN(Number(val)) && Number(val) >= 0)).optional(),\n  blockTime: z.string().datetime().optional(),\n  notes: z.string().optional(),\n  reason: z.string().min(1, 'Reason for edit is required'),\n});\n\n// Mock data from simple endpoint\nconst exampleTrades = [\n  {\n    id: '1',\n    type: 'BUY',\n    tokenIn: 'SOL',\n    tokenOut: 'BONK',\n    amountIn: 10,\n    amountOut: 500000000,\n    priceIn: 95.50,\n    priceOut: 0.0000191,\n    executedAt: '2024-02-10T10:30:00',\n    dex: 'Jupiter',\n    fees: 0.005,\n    notes: 'Saw increasing volume on DEXScreener, community hype building',\n    isManual: false,\n    mistakes: []\n  },\n  {\n    id: '2',\n    type: 'SELL',\n    tokenIn: 'BONK',\n    tokenOut: 'SOL',\n    amountIn: 250000000,\n    amountOut: 5.2,\n    priceIn: 0.0000208,\n    priceOut: 96.15,\n    executedAt: '2024-02-10T14:45:00',\n    dex: 'Raydium',\n    fees: 0.003,\n    notes: 'Taking 50% profits at 2x, letting rest ride',\n    isManual: false,\n    mistakes: []\n  },\n  {\n    id: '3',\n    type: 'BUY',\n    tokenIn: 'USDC',\n    tokenOut: 'WIF',\n    amountIn: 1000,\n    amountOut: 300,\n    priceIn: 1,\n    priceOut: 3.33,\n    executedAt: '2024-02-09T09:15:00',\n    dex: 'Orca',\n    fees: 1.50,\n    notes: 'Dogwifhat breaking out, strong volume, X sentiment bullish',\n    isManual: false,\n    mistakes: [{\n      id: '1',\n      mistakeType: 'FOMO Entry',\n      severity: 'HIGH',\n      category: { name: 'FOMO Entry', color: '#ef4444' }\n    }]\n  },\n  {\n    id: '4',\n    type: 'SELL',\n    tokenIn: 'WIF',\n    tokenOut: 'USDC',\n    amountIn: 150,\n    amountOut: 600,\n    priceIn: 4.00,\n    priceOut: 1,\n    executedAt: '2024-02-11T11:20:00',\n    dex: 'Jupiter',\n    fees: 0.90,\n    notes: 'Partial exit at resistance, keeping 50% for higher targets',\n    isManual: false,\n    mistakes: []\n  },\n  {\n    id: '5',\n    type: 'BUY',\n    tokenIn: 'SOL',\n    tokenOut: 'JTO',\n    amountIn: 50,\n    amountOut: 1250,\n    priceIn: 94.80,\n    priceOut: 3.79,\n    executedAt: '2024-02-08T16:30:00',\n    dex: 'Raydium',\n    fees: 0.025,\n    notes: 'JTO governance proposal news, expecting pump',\n    isManual: true,\n    mistakes: []\n  },\n  {\n    id: '6',\n    type: 'BUY',\n    tokenIn: 'USDC',\n    tokenOut: 'PYTH',\n    amountIn: 2000,\n    amountOut: 5000,\n    priceIn: 1,\n    priceOut: 0.40,\n    executedAt: '2024-02-07T13:00:00',\n    dex: 'Orca',\n    fees: 3.00,\n    notes: 'Oracle narrative strong, new chain integrations coming',\n    isManual: false,\n    mistakes: []\n  },\n  {\n    id: '7',\n    type: 'BUY',\n    tokenIn: 'SOL',\n    tokenOut: 'POPCAT',\n    amountIn: 5,\n    amountOut: 50000,\n    priceIn: 94.00,\n    priceOut: 0.0094,\n    executedAt: '2024-02-01T12:00:00',\n    dex: 'Raydium',\n    fees: 0.0025,\n    notes: 'Small meme position, viral on TikTok',\n    isManual: true,\n    mistakes: []\n  },\n  {\n    id: '8',\n    type: 'SELL',\n    tokenIn: 'POPCAT',\n    tokenOut: 'SOL',\n    amountIn: 50000,\n    amountOut: 25,\n    priceIn: 0.047,\n    priceOut: 94.00,\n    executedAt: '2024-02-03T15:30:00',\n    dex: 'Jupiter',\n    fees: 0.0125,\n    notes: '5x on meme coin! Viral success',\n    isManual: false,\n    mistakes: []\n  },\n  {\n    id: '9',\n    type: 'BUY',\n    tokenIn: 'USDC',\n    tokenOut: 'RAY',\n    amountIn: 750,\n    amountOut: 500,\n    priceIn: 1,\n    priceOut: 1.50,\n    executedAt: '2024-02-03T09:00:00',\n    dex: 'Raydium',\n    fees: 1.125,\n    notes: 'Raydium v3 launch, expecting volume increase',\n    isManual: false,\n    mistakes: [{\n      id: '2',\n      mistakeType: 'Early Exit',\n      severity: 'MEDIUM',\n      category: { name: 'Early Exit', color: '#f97316' }\n    }]\n  },\n  {\n    id: '10',\n    type: 'BUY',\n    tokenIn: 'SOL',\n    tokenOut: 'RENDER',\n    amountIn: 30,\n    amountOut: 400,\n    priceIn: 93.00,\n    priceOut: 6.975,\n    executedAt: '2024-02-06T08:45:00',\n    dex: 'Raydium',\n    fees: 0.015,\n    notes: 'AI narrative heating up, NVDA earnings catalyst',\n    isManual: true,\n    mistakes: []\n  }\n];\n\n// GET: Fetch individual trade details\nexport async function GET(\n  request: NextRequest,\n  { params }: { params: Promise<{ tradeId: string }> }\n) {\n  try {\n    // Await params for Next.js 15+\n    const { tradeId } = await params;\n\n    console.log('Fetching trade with ID:', tradeId);\n\n    // Find trade in mock data\n    const trade = exampleTrades.find(t => t.id === tradeId);\n\n    if (!trade) {\n      console.log('Trade not found:', tradeId);\n      return NextResponse.json(\n        { error: 'Trade not found' },\n        { status: 404 }\n      );\n    }\n\n    console.log('Found trade:', trade.tokenIn, 'â†’', trade.tokenOut);\n\n    // Return trade with additional metadata needed for edit page\n    return NextResponse.json({\n      ...trade,\n      signature: `mock_${tradeId}_signature`,\n      blockTime: trade.executedAt,\n      source: 'mock',\n      isEditable: true,\n      lastModified: new Date().toISOString(),\n      wallet: {\n        address: 'DEMO123...WALLET',\n        label: 'Demo Wallet'\n      },\n      originalData: trade, // For edit comparison\n      impactAnalysis: {\n        positionsAffected: 0,\n        positions: [],\n        willRecalculate: false,\n        warnings: []\n      }\n    });\n  } catch (error) {\n    console.error('Failed to fetch trade details:', error);\n    return NextResponse.json(\n      { error: 'Internal server error' },\n      { status: 500 }\n    );\n  }\n}\n\n// PUT: Update existing trade (mock implementation)\nexport async function PUT(\n  request: NextRequest,\n  { params }: { params: Promise<{ tradeId: string }> }\n) {\n  try {\n    // Await params for Next.js 15+\n    const { tradeId } = await params;\n    const body = await request.json();\n\n    // Validate input\n    const validation = tradeEditSchema.safeParse(body);\n    if (!validation.success) {\n      return NextResponse.json(\n        { \n          error: 'Invalid trade data', \n          details: validation.error.errors \n        },\n        { status: 400 }\n      );\n    }\n\n    const data = validation.data;\n\n    // Find the existing trade in mock data\n    const existingTrade = exampleTrades.find(t => t.id === tradeId);\n\n    if (!existingTrade) {\n      return NextResponse.json(\n        { error: 'Trade not found' },\n        { status: 404 }\n      );\n    }\n\n    // Mock update - just return success with updated data\n    const updatedTrade = {\n      ...existingTrade,\n      ...data,\n      lastModified: new Date().toISOString(),\n      signature: `mock_${tradeId}_signature`,\n      blockTime: data.blockTime || existingTrade.executedAt,\n      wallet: {\n        address: 'DEMO123...WALLET',\n        label: 'Demo Wallet'\n      }\n    };\n\n    return NextResponse.json(updatedTrade);\n  } catch (error) {\n    console.error('Failed to update trade:', error);\n    return NextResponse.json(\n      { error: 'Internal server error' },\n      { status: 500 }\n    );\n  }\n}\n\n// DELETE: Delete trade (mock implementation)\nexport async function DELETE(\n  request: NextRequest,\n  { params }: { params: Promise<{ tradeId: string }> }\n) {\n  try {\n    // Await params for Next.js 15+\n    const { tradeId } = await params;\n\n    // Find the existing trade in mock data\n    const existingTrade = exampleTrades.find(t => t.id === tradeId);\n\n    if (!existingTrade) {\n      return NextResponse.json(\n        { error: 'Trade not found' },\n        { status: 404 }\n      );\n    }\n\n    // Mock deletion - just return success\n    return NextResponse.json({\n      success: true,\n      message: 'Trade deleted successfully (mock)'\n    });\n  } catch (error) {\n    console.error('Failed to delete trade:', error);\n    return NextResponse.json(\n      { error: 'Internal server error' },\n      { status: 500 }\n    );\n  }\n}"],"names":[],"mappings":"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"}}]
}