{"version":3,"sources":["../../../../node_modules/%40clerk/nextjs/dist/esm/chunk-BUSYA2B4.js","../../../../node_modules/%40clerk/nextjs/dist/esm/server/fs/utils.js","../../../../node_modules/%40clerk/nextjs/dist/esm/runtime/node/safe-node-apis.js","../../../../node_modules/%40clerk/nextjs/src/server/fs/middleware-location.ts"],"sourcesContent":["var __getOwnPropNames = Object.getOwnPropertyNames;\nvar __commonJS = (cb, mod) => function __require() {\n  return mod || (0, cb[__getOwnPropNames(cb)[0]])((mod = { exports: {} }).exports, mod), mod.exports;\n};\n\nexport {\n  __commonJS\n};\n//# sourceMappingURL=chunk-BUSYA2B4.js.map","import \"../../chunk-BUSYA2B4.js\";\nimport nodeRuntime from \"#safe-node-apis\";\nfunction assertNotNullable(value, moduleName) {\n  if (!value) {\n    throw new Error(`Clerk: ${moduleName} is missing. This is an internal error. Please contact Clerk's support.`);\n  }\n}\nconst nodeFsOrThrow = () => {\n  assertNotNullable(nodeRuntime.fs, \"fs\");\n  return nodeRuntime.fs;\n};\nconst nodePathOrThrow = () => {\n  assertNotNullable(nodeRuntime.path, \"path\");\n  return nodeRuntime.path;\n};\nconst nodeCwdOrThrow = () => {\n  assertNotNullable(nodeRuntime.cwd, \"cwd\");\n  return nodeRuntime.cwd;\n};\nexport {\n  nodeCwdOrThrow,\n  nodeFsOrThrow,\n  nodePathOrThrow\n};\n//# sourceMappingURL=utils.js.map","import {\n  __commonJS\n} from \"../../chunk-BUSYA2B4.js\";\nvar require_safe_node_apis = __commonJS({\n  \"src/runtime/node/safe-node-apis.js\"(exports, module) {\n    const { existsSync, writeFileSync, readFileSync, appendFileSync, mkdirSync, rmSync } = require(\"node:fs\");\n    const path = require(\"node:path\");\n    const fs = {\n      existsSync,\n      writeFileSync,\n      readFileSync,\n      appendFileSync,\n      mkdirSync,\n      rmSync\n    };\n    const cwd = () => process.cwd();\n    module.exports = { fs, path, cwd };\n  }\n});\nexport default require_safe_node_apis();\n//# sourceMappingURL=safe-node-apis.js.map","import { isNext16OrHigher } from '../../utils/sdk-versions';\nimport { nodeCwdOrThrow, nodeFsOrThrow, nodePathOrThrow } from './utils';\n\nfunction hasSrcAppDir() {\n  const { existsSync } = nodeFsOrThrow();\n  const path = nodePathOrThrow();\n  const cwd = nodeCwdOrThrow();\n\n  const projectWithAppSrc = path.join(cwd(), 'src', 'app');\n\n  return !!existsSync(projectWithAppSrc);\n}\n\nfunction suggestMiddlewareLocation() {\n  const fileExtensions = ['ts', 'js'] as const;\n  // Next.js 16+ supports both middleware.ts (Edge runtime) and proxy.ts (Node.js runtime)\n  const fileNames = isNext16OrHigher ? ['middleware', 'proxy'] : ['middleware'];\n  const fileNameDisplay = isNext16OrHigher ? 'middleware or proxy' : 'middleware';\n\n  const suggestionMessage = (\n    fileName: string,\n    extension: (typeof fileExtensions)[number],\n    to: 'src/' | '',\n    from: 'src/app/' | 'app/' | '',\n  ) =>\n    `Clerk: clerkMiddleware() was not run, your ${fileNameDisplay} file might be misplaced. Move your ${fileNameDisplay} file to ./${to}${fileName}.${extension}. Currently located at ./${from}${fileName}.${extension}`;\n\n  const { existsSync } = nodeFsOrThrow();\n  const path = nodePathOrThrow();\n  const cwd = nodeCwdOrThrow();\n\n  const projectWithAppSrcPath = path.join(cwd(), 'src', 'app');\n  const projectWithAppPath = path.join(cwd(), 'app');\n\n  const checkMiddlewareLocation = (\n    basePath: string,\n    to: 'src/' | '',\n    from: 'src/app/' | 'app/' | '',\n  ): string | undefined => {\n    for (const fileName of fileNames) {\n      for (const fileExtension of fileExtensions) {\n        if (existsSync(path.join(basePath, `${fileName}.${fileExtension}`))) {\n          return suggestionMessage(fileName, fileExtension, to, from);\n        }\n      }\n    }\n    return undefined;\n  };\n\n  if (existsSync(projectWithAppSrcPath)) {\n    return (\n      checkMiddlewareLocation(projectWithAppSrcPath, 'src/', 'src/app/') || checkMiddlewareLocation(cwd(), 'src/', '')\n    );\n  }\n\n  if (existsSync(projectWithAppPath)) {\n    return checkMiddlewareLocation(projectWithAppPath, '', 'app/');\n  }\n\n  return undefined;\n}\n\nexport { suggestMiddlewareLocation, hasSrcAppDir };\n"],"names":[],"mappings":"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","ignoreList":[0,1,2]}